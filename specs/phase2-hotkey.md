# Phase 2 — 全域快捷鍵觸發

## 使用流程

1. 使用者在任意視窗中選取並複製英文單字（`Ctrl+C`）
2. 按下全域快捷鍵（預設 `Ctrl+Shift+D`）
3. 應用程式從剪貼簿讀取文字
4. 彈出查詢視窗，開始呼叫 LLM

---

## 預設快捷鍵

`Ctrl + Shift + D`

---

## OS 差異實作

使用 Electron 內建的 `globalShortcut` API，無需第三方依賴：

| 平台 | 實作方式 | 備註 |
|---|---|---|
| Windows | `electron.globalShortcut.register()` | OS 層全域，不限前景視窗 |
| macOS | 同上 | 需要 Accessibility 權限（首次啟動時 OS 會提示） |
| Linux | 同上 | X11 可用；Wayland 支援不保證 |

v1 主要目標平台為 Windows。

---

## 快捷鍵衝突處理

- 應用程式啟動時嘗試註冊快捷鍵
- 若快捷鍵已被其他程式佔用（`globalShortcut.register()` 回傳 `false`）：
  - 顯示提示對話框：「快捷鍵 Ctrl+Shift+D 已被其他程式使用，請至設定更換。」
  - 應用程式繼續啟動並常駐系統匣，但快捷鍵功能停用
  - 使用者可至設定面板（Phase 5）更換快捷鍵

---

## 剪貼簿讀取

- 使用 `electron.clipboard.readText()` 讀取剪貼簿內容
- 讀取後去除前後空白（`.trim()`）
- 若剪貼簿為空或內容非文字：顯示錯誤提示「請先複製一個單字」
- 若內容超過 50 個字元：顯示錯誤提示「內容過長，請只複製單一單字」

---

## 視窗顯示位置

- 彈出視窗出現在螢幕中央
- 若視窗已開啟（前次查詢未關閉）：清空內容、以新單字重新查詢
